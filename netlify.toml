[build]
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "18"
  NETLIFY_SITE_ID = "22d6cc06-98bf-4c11-8e05-b1c37cc42562"
  NETLIFY_BLOBS_SITE_ID = "22d6cc06-98bf-4c11-8e05-b1c37cc42562"

# User Analytics Function
[functions.user-analytics]
  included_files = []

# Clean URL redirects
[[redirects]]
  from = "/analytics"
  to = "/analytics-dashboard.html"
  status = 200

[[redirects]]
  from = "/dashboard"
  to = "/analytics-dashboard.html"
  status = 200

[[redirects]]
  from = "/presentation"
  to = "/presentation/presentation.html"
  status = 200

# CORS headers for analytics function
[[headers]]
  for = "/.netlify/functions/*"
  [headers.values]
    Access-Control-Allow-Origin = "*"
    Access-Control-Allow-Headers = "Content-Type, Authorization"
    Access-Control-Allow-Methods = "GET, POST, OPTIONS"

# SPA fallback (must be last)
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200